<!DOCTYPE html>
<html>
<head>
  <title>Artillery report</title>
  <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.0/d3.min.js' charset='utf-8'></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.6.0/metricsgraphics.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.6.0/metricsgraphics.min.js"></script>

  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
  <link href='https://netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css' rel='stylesheet' type='text/css'>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js" charset="utf-8"></script>

  <style>
  body, p, li {
    font-family: sans-serif;
    font-size: 10pt;
  }

  h1 {
    font-size: 18pt;
    font-weight: bold;
  }

  #errorsContainer > p {
    color: #009900;
  }

  #footer {
    padding: 1em;
    font-size: 0.8em;
    color: #999;
    text-align: center;
    margin-top: 1em;
    background-color: #eee;
  }
  #editor {
    font-size: 8pt;
    height: 20em;
  }
  </style>

  <script>
  window.Report = {
  "aggregate": {
    "timestamp": "2018-02-07T23:13:06.915Z",
    "scenariosCreated": 100,
    "scenariosCompleted": 100,
    "requestsCompleted": 100,
    "latency": {
      "min": 3.5,
      "max": 66.6,
      "median": 4.1,
      "p95": 5.9,
      "p99": 47.2
    },
    "rps": {
      "count": 100,
      "mean": 18.35
    },
    "scenarioDuration": {
      "min": 4.3,
      "max": 81.7,
      "median": 5,
      "p95": 7.3,
      "p99": 56.3
    },
    "scenarioCounts": {
      "0": 100
    },
    "errors": {},
    "codes": {
      "200": 1,
      "409": 99
    },
    "matches": 0,
    "customStats": {},
    "phases": [
      {
        "duration": 5,
        "arrivalRate": 20
      }
    ]
  },
  "intermediate": [
    {
      "timestamp": "2018-02-07T23:13:06.912Z",
      "scenariosCreated": 100,
      "scenariosCompleted": 100,
      "requestsCompleted": 100,
      "latency": {
        "min": 3.5,
        "max": 66.6,
        "median": 4.1,
        "p95": 5.9,
        "p99": 47.2
      },
      "rps": {
        "count": 100,
        "mean": 18.35
      },
      "scenarioDuration": {
        "min": 4.3,
        "max": 81.7,
        "median": 5,
        "p95": 7.3,
        "p99": 56.3
      },
      "scenarioCounts": {
        "0": 100
      },
      "errors": {},
      "codes": {
        "200": 1,
        "409": 99
      },
      "matches": 0,
      "latencies": [
        [
          1518045181528,
          "d054310e-b0c7-4a5b-a43a-a1bb9dc54240",
          66578028,
          200
        ],
        [
          1518045181532,
          "e7f07256-2440-41c7-bf09-cae9695f79b3",
          27898322,
          409
        ],
        [
          1518045181555,
          "d8ba5c03-694f-4681-93ab-2f238f57afe9",
          5991948,
          409
        ],
        [
          1518045181603,
          "3677bbdd-480e-4317-80f1-49c68bc7f347",
          4229937,
          409
        ],
        [
          1518045181653,
          "e71ab264-b2b8-47fd-9e62-f2c6bdee2a95",
          4057612,
          409
        ],
        [
          1518045181703,
          "a992c8b8-f7c2-400d-a901-88cafb3fe610",
          3968477,
          409
        ],
        [
          1518045181754,
          "c6e6068b-a299-47c2-90bc-b91b105e8da2",
          5219350,
          409
        ],
        [
          1518045181804,
          "2e0a5be7-3803-40a8-98d2-522a253bdb78",
          4816299,
          409
        ],
        [
          1518045181853,
          "1bb553a9-707b-4e53-aee8-ba349b763d04",
          4016845,
          409
        ],
        [
          1518045181904,
          "cb1e94b3-841c-49e8-ba36-ff9bb31bd12c",
          5409738,
          409
        ],
        [
          1518045181953,
          "cc0af2d1-0390-45cc-b6e5-3002fae8c349",
          3965735,
          409
        ],
        [
          1518045182003,
          "636d6d72-e0e7-42a8-8e29-c0a686534634",
          3876221,
          409
        ],
        [
          1518045182054,
          "43c29c25-343f-4249-8b75-70a5a9aa33c2",
          4128809,
          409
        ],
        [
          1518045182103,
          "8a52a01c-51ed-49bc-abca-45aca64e9c63",
          4457304,
          409
        ],
        [
          1518045182154,
          "111305c1-2010-4eb6-913b-e78aa421fd3b",
          5108193,
          409
        ],
        [
          1518045182203,
          "d43b94df-3a10-44ae-bf4b-f3de63de34e5",
          3882524,
          409
        ],
        [
          1518045182253,
          "3e4597ec-82a5-483d-8e1f-ea5a9f5b6251",
          3894449,
          409
        ],
        [
          1518045182303,
          "92de8c1d-6f84-4a2e-a05e-37bdb986f162",
          3776430,
          409
        ],
        [
          1518045182352,
          "2213ee8b-1010-4490-818c-ebb37d9d0af6",
          3585596,
          409
        ],
        [
          1518045182404,
          "13b81316-2819-41ad-83e3-7132dc7e486a",
          4916914,
          409
        ],
        [
          1518045182453,
          "e5e2c474-f9c4-4917-839d-9df3e4bc8f5f",
          3899654,
          409
        ],
        [
          1518045182503,
          "17c70a27-82e0-4f13-ba24-d686384e5688",
          4137315,
          409
        ],
        [
          1518045182556,
          "dbb79c17-c99c-47c1-bdb8-a0de34548734",
          5281084,
          409
        ],
        [
          1518045182603,
          "0a7a06da-f82f-4951-ba10-2777b43df2cd",
          4432139,
          409
        ],
        [
          1518045182654,
          "d849b4ea-f63d-4d6b-8bae-1620300dd661",
          4531334,
          409
        ],
        [
          1518045182704,
          "52f49f2e-f9fa-4df9-8270-00f824734d33",
          5185753,
          409
        ],
        [
          1518045182753,
          "2d2f87f7-c4ba-4a97-9ad5-717790cdf31f",
          3923334,
          409
        ],
        [
          1518045182802,
          "eb4fd7b1-7274-4a2a-baa6-cdc928e81bd6",
          3685452,
          409
        ],
        [
          1518045182853,
          "6f07f639-a37b-4706-a5f3-7d47447e9d97",
          3806088,
          409
        ],
        [
          1518045182903,
          "063cfb2a-928f-4240-bdcc-01ebf3867452",
          4313787,
          409
        ],
        [
          1518045182954,
          "3fd26759-a54c-470a-bf91-0c800f4d1d60",
          4986933,
          409
        ],
        [
          1518045183003,
          "6b8a0663-3eaa-4332-bcc4-c0db908dcdb4",
          4009104,
          409
        ],
        [
          1518045183052,
          "3fd58e93-0ff9-42a4-b084-d6d11b2cf685",
          3693014,
          409
        ],
        [
          1518045183103,
          "4c51d4b0-4330-42f8-ba52-ea7ced4efda1",
          3779222,
          409
        ],
        [
          1518045183152,
          "59a2f7e6-7cd7-49d6-842a-659de097d126",
          3721787,
          409
        ],
        [
          1518045183203,
          "3cad661c-0954-4eec-8177-9de74bea5240",
          4124911,
          409
        ],
        [
          1518045183253,
          "a6cec3ad-8064-419a-806e-608e5ec1572d",
          3942396,
          409
        ],
        [
          1518045183305,
          "654ac910-fc7f-47ad-8a7b-5fd2db3cc687",
          5005137,
          409
        ],
        [
          1518045183354,
          "0f816391-d876-4247-9bdd-a49fb41d20bc",
          5236777,
          409
        ],
        [
          1518045183403,
          "0acdbe8b-0abd-46a0-ae67-5e118143f745",
          3941684,
          409
        ],
        [
          1518045183454,
          "f3c6ce48-4fda-4f67-bad5-f9a1294fb21b",
          4762853,
          409
        ],
        [
          1518045183504,
          "c20272c1-a719-4ef4-996c-4a73bd98d204",
          4684707,
          409
        ],
        [
          1518045183554,
          "a10e8720-8aed-4ec4-9e38-ee40daf3a2af",
          4103384,
          409
        ],
        [
          1518045183603,
          "78292bda-ef26-411c-8bfd-45be8b76ec0f",
          4432893,
          409
        ],
        [
          1518045183653,
          "b41c81b1-6f98-47f8-b557-3b9243d91234",
          4365902,
          409
        ],
        [
          1518045183703,
          "995d9495-1385-4ed2-a63d-9d4c0bb364b4",
          4253382,
          409
        ],
        [
          1518045183753,
          "7448df71-9a49-42b2-bc17-e5020360fe42",
          4159792,
          409
        ],
        [
          1518045183803,
          "a650c849-e595-4089-8416-244223ee9122",
          4081964,
          409
        ],
        [
          1518045183853,
          "a6daf269-ee0a-4930-af4c-d405752ee38d",
          4177764,
          409
        ],
        [
          1518045183903,
          "0685cd63-df99-40b7-b04c-3f20223272ff",
          4273928,
          409
        ],
        [
          1518045183952,
          "657d2c0c-2dbf-41ad-bc1b-6987a943018d",
          3707844,
          409
        ],
        [
          1518045184003,
          "ada28f55-470a-4a78-b4d0-911a7f69db8d",
          3792403,
          409
        ],
        [
          1518045184052,
          "62020816-6ec5-4470-9bfb-9dc77ef49d65",
          3637376,
          409
        ],
        [
          1518045184103,
          "4238baf0-bfc6-433b-946b-530c26506830",
          4044210,
          409
        ],
        [
          1518045184155,
          "0ba35e21-dbc8-4a81-aee5-df6c837715fd",
          5976345,
          409
        ],
        [
          1518045184203,
          "0305b2ea-fa81-4681-aeb4-b0db89b1bc01",
          3950132,
          409
        ],
        [
          1518045184253,
          "3fe777d6-03e7-4335-86d0-7bfa78f4baff",
          3804138,
          409
        ],
        [
          1518045184304,
          "f7a1c91f-26c0-4cd2-956a-89d9fff5f0ff",
          3971199,
          409
        ],
        [
          1518045184353,
          "fbe6122a-b566-4dcd-bea6-5d03a32857a4",
          4032135,
          409
        ],
        [
          1518045184403,
          "19ff4e54-b9f8-457a-8d64-596fa00eea8a",
          4224852,
          409
        ],
        [
          1518045184454,
          "938caf37-98be-4f06-892a-3f081309b3a8",
          4238220,
          409
        ],
        [
          1518045184503,
          "df80fb85-cbe7-46db-8a49-08d745238c82",
          3847735,
          409
        ],
        [
          1518045184553,
          "f0b8ce89-ba96-4d26-8f8a-dde2a35b4552",
          4639396,
          409
        ],
        [
          1518045184603,
          "f418017a-cd42-456e-b250-cf2f1e8c096c",
          3950772,
          409
        ],
        [
          1518045184653,
          "a50ed188-da7d-4b7d-8795-4b7d3cffd4f2",
          3812105,
          409
        ],
        [
          1518045184703,
          "c7b580cc-f125-4e11-9b91-66ceca8bcd8e",
          3822919,
          409
        ],
        [
          1518045184753,
          "89375308-c004-465a-bd8d-fe9ac8f53d43",
          4270212,
          409
        ],
        [
          1518045184804,
          "9206e6cc-6564-4f3d-9186-3cfeaf14c806",
          5168428,
          409
        ],
        [
          1518045184853,
          "d162ec67-4e4e-4f76-881f-b106c7823693",
          3885169,
          409
        ],
        [
          1518045184903,
          "67f2d2cc-f6b6-4417-a83e-5ecdc1e6bcb1",
          3802470,
          409
        ],
        [
          1518045184954,
          "15c1a0d2-1159-4292-950a-f09a9d5aeb92",
          4552591,
          409
        ],
        [
          1518045185003,
          "ee885572-2173-4f7d-be16-c7943b760659",
          3801913,
          409
        ],
        [
          1518045185053,
          "ffd42e49-f112-4f15-bb8a-52b4209d972b",
          4237525,
          409
        ],
        [
          1518045185102,
          "c5871ee8-aa75-48f6-b061-9bf824c4e423",
          3556604,
          409
        ],
        [
          1518045185153,
          "166bf63e-fd44-492b-9135-a7fc43d84060",
          3932014,
          409
        ],
        [
          1518045185204,
          "2c7babec-f001-4975-925e-faa3b817eae6",
          5427086,
          409
        ],
        [
          1518045185252,
          "737da4db-683a-43f1-9992-5ee9731de3f3",
          3747001,
          409
        ],
        [
          1518045185303,
          "0de07e1f-fdd5-4b9f-a3b1-f3066ebbc070",
          3986713,
          409
        ],
        [
          1518045185353,
          "853f0e2e-e16c-4a90-938c-6a5fdb7faf7a",
          4303749,
          409
        ],
        [
          1518045185403,
          "23b391a5-ca47-4d05-bee5-14c909f6ef8a",
          3818081,
          409
        ],
        [
          1518045185455,
          "d7d471af-8caf-4f97-ab3e-ea932b247795",
          6248263,
          409
        ],
        [
          1518045185505,
          "5b2ba018-de1d-457d-888c-b53f3ce14d58",
          5907825,
          409
        ],
        [
          1518045185553,
          "48355151-8db8-4b47-b7d1-1f6b9b49a005",
          3759035,
          409
        ],
        [
          1518045185602,
          "e6529917-f6d2-4e29-9cfd-8e3fb5efa584",
          3623841,
          409
        ],
        [
          1518045185653,
          "89d92f5c-2a0d-4c99-b296-eb4ece71afd6",
          3876217,
          409
        ],
        [
          1518045185703,
          "5726a57c-2239-4af3-8d11-fbc75082ac34",
          4557939,
          409
        ],
        [
          1518045185754,
          "e7de3caa-ef50-432b-9e56-bb7cb0358d50",
          5054994,
          409
        ],
        [
          1518045185802,
          "2e42d765-c26d-4aa3-9698-cd2420253269",
          3614728,
          409
        ],
        [
          1518045185852,
          "44f3c254-c383-4639-8c78-8428c2f2dac8",
          3729751,
          409
        ],
        [
          1518045185903,
          "b09ec2b0-d925-443c-b76d-a808ee2380de",
          3876347,
          409
        ],
        [
          1518045185953,
          "9293277c-19fb-4285-837c-890619fc157c",
          3790345,
          409
        ],
        [
          1518045186004,
          "dc37505e-3328-4f97-969e-fd8feeea260c",
          4937979,
          409
        ],
        [
          1518045186053,
          "3838436e-2456-4bc4-8d1a-e5bf646761ac",
          4125186,
          409
        ],
        [
          1518045186103,
          "e9a062c8-8411-4215-b193-7b57f044487e",
          3991299,
          409
        ],
        [
          1518045186153,
          "73565e05-6105-4669-922b-d22c0f2fa146",
          4024065,
          409
        ],
        [
          1518045186203,
          "e0451646-23b3-4397-8460-95f4a7b6dfc7",
          3963051,
          409
        ],
        [
          1518045186253,
          "35b638af-9f71-422e-931e-e6de8f1837f4",
          4105871,
          409
        ],
        [
          1518045186303,
          "433619a0-aa51-43da-93d0-b60aef2125a2",
          3833552,
          409
        ],
        [
          1518045186352,
          "b1ef745a-5185-479f-8069-e16ed3d6d4f3",
          3476374,
          409
        ],
        [
          1518045186404,
          "f0878852-36c8-4436-bf37-7f062cad53d6",
          5343777,
          409
        ]
      ],
      "customStats": {},
      "concurrency": 0,
      "pendingRequests": 0
    }
  ]
};
  </script>

  <style>
      h1 {
        line-height: 200%;
      }

      body {
          background-color: #fcfcfc;
      }

      .container {
          width: 100%;
          min-width: 960px;
      }
  </style>


</head>
<body>

<div class="container">

<div class="row" id="header">
  <div class="col-lg-4 col-lg-offset-4">
    <pre style="font-size: 5pt; background-color: #fcfcfc; border: none;">
            _   _ _ _                                                _
  __ _ _ __| |_(_) | | ___ _ __ _   _      _ __ ___ _ __   ___  _ __| |_
 / _` | '__| __| | | |/ _ \ '__| | | |    | '__/ _ \ '_ \ / _ \| '__| __|
| (_| | |  | |_| | | |  __/ |  | |_| |    | | |  __/ |_) | (_) | |  | |_
 \__,_|_|   \__|_|_|_|\___|_|   \__, |    |_|  \___| .__/ \___/|_|   \__|
                                |___/              |_|

    </pre>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <h1 class="text-center" id="page-title">Test run on <span id="timestamp">date</span></h1>
  </div>
</div>

<div class="row">
  <div class="col-lg-3">
    <p><strong>Summary</strong></p>
    <table class="table table-bordered table-hover table-condensed">
      <tbody>
        <tr>
          <td>Test duration</td>
          <td><span id="testDuration">0</span> sec</td>
        </tr>
        <tr>
          <td>Scenarios created</td>
          <td><span id="scenariosCreated">0</span></td>
        </tr>

        <tr>
          <td>Scenarios completed</td>
          <td><span id="scenariosCompleted">0</span></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="col-lg-5" id="scenarioCountsContainer">
    <div>
      <strong>Scenario counts:</strong>

      <p></p>

      <table class="table table-bordered table-hover table-condensed" id="scenarioCounts">
      </table>
    </div>
  </div>

  <div class="col-lg-1">
    <div id="codesContainer">
      <strong>Codes</strong>

      <p></p>

      <table class="table table-bordered table-hover table-condensed" id="codes">
      </table>
    </div>
  </div>

  <div class="col-lg-3">
    <div id="errorsContainer">
      <strong>Errors</strong>

      <p></p>

      <table class="table table-bordered table-hover table-condensed" id="errors">
      </table>
    </div>
  </div>
</div> <!-- /.row -->

<div class="row">
  <div class="text-center col-lg-12">
    <h2>Charts</h2>
  </div>
</div>

<div class="row">
  <div class="latency-histogram text-center col-lg-12"></div>
</div>

<div class="row">
  <div class="latency text-center col-lg-12"></div>
</div>

<div class="latency-legend"></div>

<div class="row">

</div>

<div class="row">
  <div class="concurrency text-center col-lg-12"></div>
</div>

<div class="row">
  <div class="rps-mean text-center col-lg-12"></div>
</div>
<div class="row">
  <div class="rps-count text-center col-lg-12"></div>
</div>

<div class="row">
  <div class="codes-line text-center col-lg-12"></div>
</div>
<div class="row">
  <div class="errors-line text-center col-lg-12"></div>
</div>


  


</div>

<div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <h3 class="text-center">Raw report data</h3>
    <p>This is the raw JSON stats output that the report was generated from.</p>
    <div id="editor">
    </div>
  </div>
</div>

<script>
var editor = ace.edit("editor");
editor.getSession().setMode("ace/mode/javascript");
editor.setValue(JSON.stringify(Report, null, 2));
editor.gotoLine(1);editor.setHighlightActiveLine(false);

var l = _;

$('#timestamp').html(moment(Report.aggregate.timestamp).format('DD MMM YYYY HH:mm:SS'));
$('#testDuration').html(l.size(Report.intermediate) * 10);
$('#scenariosCompleted').html(Report.aggregate.scenariosCompleted);
$('#scenariosCreated').html(Report.aggregate.scenariosCreated);

var markers = [];
if(l.size(Report.phases) > 0) {
  markers = l.foldl(Report.phases, function(acc, phase, index) {
    var label = phase.name || 'Phase ' + (index + 1);
    var timestamp = (index === 0) ? 0 : Report.phases[index - 1].duration + acc[index - 1].timestamp;

    acc.push({
      timestamp: timestamp,
      label: label
    });

    return acc;
  }, []);
}

if (l.size(Report.aggregate.scenarioCounts) > 0) {
  l.each(Report.aggregate.scenarioCounts, function(count, name) {
    var $tdName = $('<td>' + name + '</td>');
    var percentage = Math.round(count / Report.aggregate.scenariosCreated * 100 * 1000) / 1000;
    var $tdCount = $('<td>' + count + ' (' + percentage + '%)' + '</td>');
    var $el = $('<tr></tr>')
      .append($tdName)
      .append($tdCount)
      .appendTo($('#scenarioCounts'));
  });
} else {
  $('#scenarioCountsContainer').hide();
}

if (l.size(Report.aggregate.codes) > 0) {
  l.each(Report.aggregate.codes, function(count, code) {
    var anchor = '';
    if (code >= 100 && code < 200) {
      anchor = '#1xx_Informational';
    } else if (code >= 200 && code < 300) {
      anchor = '#2xx_Success';
    } else if (code >= 300 && code < 400) {
      anchor = '#3xx_Redirection';
    } else if (code >= 400 && code < 500) {
      anchor = '#4xx_Client_Error';
    } else if (code >= 500 && code < 600) {
      anchor = '#5xx_Server_Error';
    }

    var $a = $('<a>' + code + '</a>').attr('href', 'https://en.wikipedia.org/wiki/List_of_HTTP_status_codes' + anchor);
    var $td = $('<td></td>').append($a);
    var $el = $('<tr></tr>')
      .append($td)
      .append($('<td>' + count + '</td>'))
      .appendTo($('#codes'));
  });
} else {
  $('#codesContainer').hide();
}

if (l.size(Report.aggregate.errors) > 0) {
  l.each(Report.aggregate.errors, function(count, code) {
    var $el = $('<tr></tr>')
      .append($('<td>' + code + '</td>'))
      .append($('<td>' + count + '</td>'))
      .appendTo($('#errors'));
  });
} else {
  $('#errorsContainer > p').html('&#10004; Test completed without network or OS errors.');
}

var histogramData = l.map(Report.aggregate.latency, function(v, k) { return {bin: k, value: v} });

MG.data_graphic({
  chart_type: 'bar',
  x_label: 'Percentile',
  y_label: '(ms)',
  animate_on_load: true,
  title: 'Overall Latency Distribution',
  description: 'Distribution of all observed response latencies',
  target: '.latency-histogram',
  data: histogramData,
  x_accessor: 'bin',
  y_accessor: 'value',
  binned: true,
  height: 250,
  interpolate: 'monotone',
  padding_percentage: 0,
  bar_orientation: 'vertical',
  width: 450
});

var chartData = l.map(
  window.Report.intermediate,
  function(o,i) {
    return {
      timestamp: i*10+10,

      rpsMean: o.rps.mean,
      rpsCount: o.rps.count,
      concurrency: o.concurrency,
      latencyMax: o.latency.max,
      latencyp99: o.latency.p99,
      latencyp95: o.latency.p95,
      latencyMedian: o.latency.median,
      latencyMin: o.latency.min
    }
  });

//
// Response codes
//

if (l.size(Report.aggregate.codes) > 0) {
  var codesData = l.foldl(Report.intermediate, function(acc, o, i) {
    var res = {};
    res.timestamp = i*10+10;
    l.each(o.codes, function(count, code) {
      res[code] = count;
    });
    acc.push(res);
    return acc;
  }, []);
  var uniqueCodes = l.foldl(Report.intermediate, function(acc, o) {
    l.each(o.codes, function(count, code) {
      if (l.indexOf(acc, code) === -1) {
        acc.push(code);
      }
    });
    return acc;
  }, []);

  MG.data_graphic({
    x_label: 'Time',
    y_label: 'Count',
    title: 'HTTP codes',
    description: 'Occurence of HTTP response codes',
    target: '.codes-line',
    data: codesData,
    x_accessor: 'timestamp',
    y_accessor: uniqueCodes,
    legend: uniqueCodes,
    right: 50,
    chart_type: 'line',
    area: false,
    markers: markers,
    width: 900
  });
}

//
// Errors
//

if (l.size(Report.aggregate.errors) > 0) {
  var errorData = l.foldl(Report.intermediate, function(acc, o, i) {
    var res = {};
    res.timestamp = i*10+10;
    l.each(o.errors, function(count, name) {
      res[name] = count;
    });
    acc.push(res);
    return acc;
  }, []);
  var uniqueErrors = l.foldl(Report.intermediate, function(acc, o) {
    l.each(o.errors, function(count, name) {
      if (l.indexOf(acc, name) === -1) {
        acc.push(name);
      }
    });
    return acc;
  }, []);

  MG.data_graphic({
    title: 'Error Codes',
    description: 'Occurence of error codes',
    target: '.errors-line',
    data: errorData,
    x_accessor: 'timestamp',
    y_accessor: uniqueErrors,
    chart_type: 'line',
    area: false,
    markers: markers
  });

}

//
// Latency
//
MG.data_graphic({
  chart_type: 'line',
  x_label: 'Time',
  y_label: '(ms)',
  animate_on_load: true,
  area: false,
  title: "Latency At Intervals",
  description: "Latency values at different points during the test run",
  data: chartData,
  target: '.latency',
  width: 900,
  x_accessor: 'timestamp',
  y_accessor: ['latencyMin', 'latencyMedian', 'latencyp95', 'latencyMax'],
  legend: ['min', 'p50', 'p95', 'max'],
  //legend_target: '.latency-legend',
  right: 50,
  interpolate: 'monotone',
  mouseover: function(d, i) {
  },
  markers: markers
        });

            MG.data_graphic({
            animate_on_load: true,
            area: false,
            y_label: 'Count',
            x_label: 'Time',
            title: 'Concurrent users',
            description: 'Concurrent users',
            data: chartData,
            target: '.concurrency',
            x_accessor: 'timestamp',
            y_accessor: ['concurrency'],
            interpolate: 'monotone',
            markers: markers,
            width: 900
            });

MG.data_graphic({
  animate_on_load: true,
  area: false,
  y_label: 'Count',
  x_label: 'Time',
  title: 'Mean RPS',
  description: 'Mean requests per second',
  data: chartData,
  target: '.rps-mean',
  x_accessor: 'timestamp',
  y_accessor: ['rpsMean'],
  interpolate: 'monotone',
  markers: markers,
  width: 900
});

MG.data_graphic({
  animate_on_load: true,
  area: false,
  y_label: 'Count',
  x_label: 'Time',
  title: 'RPS Count',
  description: 'Count of requests per second',
  data: chartData,
  target: '.rps-count',
  x_accessor: 'timestamp',
  y_accessor: ['rpsCount'],
  interpolate: 'monotone',
  markers: markers,
  width: 900
});
</script>
<div id="footer">
  <footer>This report was created with <a href="https://artillery.io">Artillery</a> - free open-source load-testing for HTTP and WebSockets</footer>
</div>
</body>
</html>
